<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Time Series sfdsasdasd - Financial Time Series Models (ARCH/GARCH)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles/layout.css">
<link rel="stylesheet" href="./styles/layout.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Time Series sfdsasdasd</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">ABOUT ME</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Introduction.html">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./DataSources.html">
 <span class="menu-text">Data Sources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./DataVis.html">
 <span class="menu-text">Data Visualization</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./EDA.html">
 <span class="menu-text">Exploratory Data Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ARModels.html">
 <span class="menu-text">ARMA/ARIMA/SARIMA Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ASV.html">
 <span class="menu-text">ARIMAX/SARIMAX/VAR</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./SAF.html">
 <span class="menu-text">Spectral Analysis and Filtering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./GARCH.html" aria-current="page">
 <span class="menu-text">Financial Time Series Models (ARCH/GARCH)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./TS.html">
 <span class="menu-text">Deep Learning for TS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./conclusion.html">
 <span class="menu-text">Conclusions</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#income-stock-analaysis" id="toc-income-stock-analaysis" class="nav-link active" data-scroll-target="#income-stock-analaysis">Income Stock Analaysis</a>
  <ul class="collapse">
  <li><a href="#prepare-the-dataset" id="toc-prepare-the-dataset" class="nav-link" data-scroll-target="#prepare-the-dataset">Prepare the Dataset</a></li>
  <li><a href="#calculate-the-returns" id="toc-calculate-the-returns" class="nav-link" data-scroll-target="#calculate-the-returns">Calculate the Returns</a></li>
  <li><a href="#stationarity" id="toc-stationarity" class="nav-link" data-scroll-target="#stationarity">Stationarity</a></li>
  <li><a href="#volatility" id="toc-volatility" class="nav-link" data-scroll-target="#volatility">Volatility</a></li>
  <li><a href="#prepare-to-fit-the-model-and-check-acf-and-pacf" id="toc-prepare-to-fit-the-model-and-check-acf-and-pacf" class="nav-link" data-scroll-target="#prepare-to-fit-the-model-and-check-acf-and-pacf">Prepare to fit the model and check acf and pacf</a></li>
  <li><a href="#acf-of-absolute-values-of-the-returns" id="toc-acf-of-absolute-values-of-the-returns" class="nav-link" data-scroll-target="#acf-of-absolute-values-of-the-returns">ACF of absolute values of the returns</a></li>
  <li><a href="#acf-for-squared-values" id="toc-acf-for-squared-values" class="nav-link" data-scroll-target="#acf-for-squared-values">ACF for squared values</a></li>
  <li><a href="#fit-an-appropriate-ararcharmagarch-or-arima-archgarch" id="toc-fit-an-appropriate-ararcharmagarch-or-arima-archgarch" class="nav-link" data-scroll-target="#fit-an-appropriate-ararcharmagarch-or-arima-archgarch">Fit an appropriate AR+ARCH/ARMA+GARCH or ARIMA-ARCH/GARCH</a>
  <ul class="collapse">
  <li><a href="#first-determine-the-arima-model-using-model-diagnostic" id="toc-first-determine-the-arima-model-using-model-diagnostic" class="nav-link" data-scroll-target="#first-determine-the-arima-model-using-model-diagnostic">First, determine the ARIMA model using model diagnostic</a></li>
  <li><a href="#evaluations-using-aic-bic-and-aicc" id="toc-evaluations-using-aic-bic-and-aicc" class="nav-link" data-scroll-target="#evaluations-using-aic-bic-and-aicc">Evaluations using AIC, BIC, and AICc</a></li>
  </ul></li>
  <li><a href="#compare-arima-models-for-404-and-arima-000" id="toc-compare-arima-models-for-404-and-arima-000" class="nav-link" data-scroll-target="#compare-arima-models-for-404-and-arima-000">Compare ARIMA Models for (4,0,4) and ARIMA (0,0,0)</a></li>
  <li><a href="#fit-the-best-one-arima404" id="toc-fit-the-best-one-arima404" class="nav-link" data-scroll-target="#fit-the-best-one-arima404">Fit the best one ARIMA(4,0,4)</a></li>
  <li><a href="#get-the-residuals-of-the-arima-model" id="toc-get-the-residuals-of-the-arima-model" class="nav-link" data-scroll-target="#get-the-residuals-of-the-arima-model">get the residuals of the arima model</a></li>
  <li><a href="#model-diagnostics-for-archgarch-model" id="toc-model-diagnostics-for-archgarch-model" class="nav-link" data-scroll-target="#model-diagnostics-for-archgarch-model">Model Diagnostics For ARCH/GARCH model</a>
  <ul class="collapse">
  <li><a href="#acf-and-pacf-for-squared-residuals" id="toc-acf-and-pacf-for-squared-residuals" class="nav-link" data-scroll-target="#acf-and-pacf-for-squared-residuals">Acf and pacf for squared residuals</a></li>
  <li><a href="#try-to-compare-with-garch11garch12" id="toc-try-to-compare-with-garch11garch12" class="nav-link" data-scroll-target="#try-to-compare-with-garch11garch12">Try to compare with Garch(1,1),Garch(1,2)</a></li>
  </ul></li>
  <li><a href="#final-model-arima-404-garch12" id="toc-final-model-arima-404-garch12" class="nav-link" data-scroll-target="#final-model-arima-404-garch12">Final Model: ARIMA (4,0,4) + GARCH(1,2)</a>
  <ul class="collapse">
  <li><a href="#forecast-arima-404-garch12" id="toc-forecast-arima-404-garch12" class="nav-link" data-scroll-target="#forecast-arima-404-garch12">Forecast: ARIMA (4,0,4) + GARCH(1,2)</a></li>
  <li><a href="#box-ljung-test" id="toc-box-ljung-test" class="nav-link" data-scroll-target="#box-ljung-test">Box Ljung Test</a></li>
  <li><a href="#the-equation" id="toc-the-equation" class="nav-link" data-scroll-target="#the-equation">The Equation</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#home-value-sale-price-and-rental-price-return-analysis" id="toc-home-value-sale-price-and-rental-price-return-analysis" class="nav-link" data-scroll-target="#home-value-sale-price-and-rental-price-return-analysis">Home Value, Sale Price, and Rental Price Return analysis</a>
  <ul class="collapse">
  <li><a href="#calculate-the-returns-1" id="toc-calculate-the-returns-1" class="nav-link" data-scroll-target="#calculate-the-returns-1">Calculate the Returns</a></li>
  <li><a href="#plot-for-rental-sale-home-values-for-san-jose-ca" id="toc-plot-for-rental-sale-home-values-for-san-jose-ca" class="nav-link" data-scroll-target="#plot-for-rental-sale-home-values-for-san-jose-ca">Plot For Rental, Sale, Home Values For San Jose, CA</a></li>
  <li><a href="#return-plots" id="toc-return-plots" class="nav-link" data-scroll-target="#return-plots">Return Plots</a></li>
  <li><a href="#stationarity-1" id="toc-stationarity-1" class="nav-link" data-scroll-target="#stationarity-1">Stationarity</a></li>
  <li><a href="#first-fit-a-linear-model" id="toc-first-fit-a-linear-model" class="nav-link" data-scroll-target="#first-fit-a-linear-model">First Fit a Linear Model</a></li>
  <li><a href="#evaluations-of-the-model" id="toc-evaluations-of-the-model" class="nav-link" data-scroll-target="#evaluations-of-the-model">Evaluations of the model</a></li>
  <li><a href="#prepare-to-fit-the-model-and-get-residuals" id="toc-prepare-to-fit-the-model-and-get-residuals" class="nav-link" data-scroll-target="#prepare-to-fit-the-model-and-get-residuals">Prepare to fit the model and get residuals</a>
  <ul class="collapse">
  <li><a href="#check-correlation-in-these-residuals-using-an-acf-plot" id="toc-check-correlation-in-these-residuals-using-an-acf-plot" class="nav-link" data-scroll-target="#check-correlation-in-these-residuals-using-an-acf-plot">check correlation in these residuals using an ACF plot</a></li>
  </ul></li>
  <li><a href="#fit-an-appropriate-ararcharmagarch-or-arima-archgarch-1" id="toc-fit-an-appropriate-ararcharmagarch-or-arima-archgarch-1" class="nav-link" data-scroll-target="#fit-an-appropriate-ararcharmagarch-or-arima-archgarch-1">Fit an appropriate AR+ARCH/ARMA+GARCH or ARIMA-ARCH/GARCH</a>
  <ul class="collapse">
  <li><a href="#first-determine-the-arima-model-using-model-diagnostic-1" id="toc-first-determine-the-arima-model-using-model-diagnostic-1" class="nav-link" data-scroll-target="#first-determine-the-arima-model-using-model-diagnostic-1">First, determine the ARIMA model using model diagnostic</a></li>
  <li><a href="#evaluations-using-aic-bic-and-aicc-1" id="toc-evaluations-using-aic-bic-and-aicc-1" class="nav-link" data-scroll-target="#evaluations-using-aic-bic-and-aicc-1">Evaluations using AIC, BIC, and AICc</a></li>
  <li><a href="#compare-arima-models-for-404-and-arima-000-1" id="toc-compare-arima-models-for-404-and-arima-000-1" class="nav-link" data-scroll-target="#compare-arima-models-for-404-and-arima-000-1">Compare ARIMA Models for (4,0,4) and ARIMA (0,0,0)</a></li>
  </ul></li>
  <li><a href="#fit-the-best-one-arima011" id="toc-fit-the-best-one-arima011" class="nav-link" data-scroll-target="#fit-the-best-one-arima011">Fit the best one ARIMA(0,1,1)</a>
  <ul class="collapse">
  <li><a href="#get-the-residuals-of-the-arima-model-1" id="toc-get-the-residuals-of-the-arima-model-1" class="nav-link" data-scroll-target="#get-the-residuals-of-the-arima-model-1">get the residuals of the arima model</a></li>
  </ul></li>
  <li><a href="#model-diagnostics-for-archgarch-model-no-need-in-my-case-just-to-verify" id="toc-model-diagnostics-for-archgarch-model-no-need-in-my-case-just-to-verify" class="nav-link" data-scroll-target="#model-diagnostics-for-archgarch-model-no-need-in-my-case-just-to-verify">Model Diagnostics For ARCH/GARCH model (No need in my case, Just to Verify)</a>
  <ul class="collapse">
  <li><a href="#try-to-compare-with-garch10" id="toc-try-to-compare-with-garch10" class="nav-link" data-scroll-target="#try-to-compare-with-garch10">Try to compare with Garch(1,0)</a></li>
  </ul></li>
  <li><a href="#forecast" id="toc-forecast" class="nav-link" data-scroll-target="#forecast">Forecast</a>
  <ul class="collapse">
  <li><a href="#arima-011" id="toc-arima-011" class="nav-link" data-scroll-target="#arima-011">ARIMA (0,1,1)</a></li>
  </ul></li>
  <li><a href="#final-model-arima-011-and-equation" id="toc-final-model-arima-011-and-equation" class="nav-link" data-scroll-target="#final-model-arima-011-and-equation">Final model: ARIMA (0,1,1) and equation</a>
  <ul class="collapse">
  <li><a href="#box-ljung-test-1" id="toc-box-ljung-test-1" class="nav-link" data-scroll-target="#box-ljung-test-1">Box Ljung Test</a></li>
  <li><a href="#equation" id="toc-equation" class="nav-link" data-scroll-target="#equation">Equation</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Financial Time Series Models (ARCH/GARCH)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this section, the goal is to determine if the GARCH model can help the dataset better. The basic work flow of this section is to compare different models within ARIMA models. Then Based on different analysis to determine whether a GARCH model can help or not. In my case, the goal is to apply the models on the following datasets: Income Stock, Home value, Sale price, Rental price. The corresponding returns are being calculated before fitting into to differnet models through model diagnostics.</p>
<section id="income-stock-analaysis" class="level1">
<h1>Income Stock Analaysis</h1>
<section id="prepare-the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="prepare-the-dataset">Prepare the Dataset</h2>
<div class="cell">

</div>
<div class="cell">

</div>
<p>Income Stock Analsyis with Verizon</p>
<p>Literuature Review: Since my big picture and goal is to evaluate the correlation between Home values, prices and income to see the impact among them. Therefore, an income stock would be effective for me to get my result.</p>
<p>Wireless subscribers of Verizon provide a reliable base of revenue and cash flow. Verizon generated an impressive $12.4 billion of free cash flow through the first nine months of 2022, giving it the funds to reward its shareholders with $8.1 billion in dividends.</p>
<p>Verizon’s shares offer a hefty dividend yield (it was more than 6% in late 2022). The telecom giant has also increased its dividend for 16 straight years, the longest current streak in the U.S. telecom sector. That attractive and growing income stream makes Verizon a great stock for earning passive income.</p>
<p>Using this dataset, I can represent and make analysis on the income to see if the modeling can capture the pattern effectively.</p>
</section>
<section id="calculate-the-returns" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-returns">Calculate the Returns</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "VZ"</code></pre>
</div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>           Income Stock Returns       date
2016-01-05          0.013641027 2016-01-05
2016-01-06         -0.021300513 2016-01-06
2016-01-07         -0.005507228 2016-01-07
2016-01-08         -0.009766973 2016-01-08
2016-01-11          0.005782897 2016-01-11
2016-01-12         -0.003554766 2016-01-12</code></pre>
</div>
</div>
<p>Here, we also have the new column for returns</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stock<span class="sc">$</span>date<span class="ot">&lt;-</span><span class="fu">as.Date</span>(stock<span class="sc">$</span>date,<span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(stock, <span class="at">x =</span> <span class="sc">~</span>date, <span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">Income Stock Returns</span><span class="st">`</span>, <span class="at">name =</span> <span class="st">'Income Stock Returns From 2016'</span>, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Income Stock Returns  From 2016"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">paper_bgcolor =</span> <span class="st">'#E0E0E0'</span>, <span class="co"># Set the background color </span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot_bgcolor =</span> <span class="st">'#E0E0E0'</span>, <span class="co"># Set the background color </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Date"</span>),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Stock returns"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<iframe src="./image/GARCH/income_stock_returns.html" width="100%" height="400">
</iframe>
</section>
<section id="stationarity" class="level2">
<h2 class="anchored" data-anchor-id="stationarity">Stationarity</h2>
<p>The plot shows no particular trend. This indicates that the series is likely stationary because the mean of the series could be constant or not changing too much over time.</p>
</section>
<section id="volatility" class="level2">
<h2 class="anchored" data-anchor-id="volatility">Volatility</h2>
<p>The series seems to exhibit periods of different volatility levels within expectations. However, overall, it is pretty steady throughout the time. There are some fluctuations, but the variations appear relatively stable and small.</p>
<p>Volatility in financial time series is often clustered; periods of high volatility are followed by periods of high volatility, and periods of low volatility are followed by periods of low volatility. This plot suggests such clustering might be present.</p>
</section>
<section id="prepare-to-fit-the-model-and-check-acf-and-pacf" class="level2">
<h2 class="anchored" data-anchor-id="prepare-to-fit-the-model-and-check-acf-and-pacf">Prepare to fit the model and check acf and pacf</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>returns <span class="ot">=</span> <span class="fu">ts</span>(stock<span class="sc">$</span><span class="st">`</span><span class="at">Income Stock Returns</span><span class="st">`</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(returns) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for data"</span>) <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(returns) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for data"</span>) <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that the plots for the returns are weakly stationary.</p>
</section>
<section id="acf-of-absolute-values-of-the-returns" class="level2">
<h2 class="anchored" data-anchor-id="acf-of-absolute-values-of-the-returns">ACF of absolute values of the returns</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(<span class="fu">abs</span>(returns)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for data"</span>) <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(<span class="fu">abs</span>(returns)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for data"</span>) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="acf-for-squared-values" class="level2">
<h2 class="anchored" data-anchor-id="acf-for-squared-values">ACF for squared values</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(returns<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for data"</span>) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(returns<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for data"</span>) <span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Based on the acf and pacf, we can see that the returns are weakly stationary.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(returns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in adf.test(returns): p-value smaller than printed p-value</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  returns
Dickey-Fuller = -12.686, Lag order = 12, p-value = 0.01
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p>We can see that there are little correlations left. The returns are stationary.</p>
</section>
<section id="fit-an-appropriate-ararcharmagarch-or-arima-archgarch" class="level2">
<h2 class="anchored" data-anchor-id="fit-an-appropriate-ararcharmagarch-or-arima-archgarch">Fit an appropriate AR+ARCH/ARMA+GARCH or ARIMA-ARCH/GARCH</h2>
<section id="first-determine-the-arima-model-using-model-diagnostic" class="level3">
<h3 class="anchored" data-anchor-id="first-determine-the-arima-model-using-model-diagnostic">First, determine the ARIMA model using model diagnostic</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reference from the lab 6 part 1 demo:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>temp.ts <span class="ot">=</span> returns</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>temp<span class="ot">=</span> <span class="fu">data.frame</span>()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>ls<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="cn">NA</span>,<span class="dv">6</span><span class="sc">*</span><span class="dv">71</span>),<span class="at">nrow=</span><span class="dv">71</span>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(q <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(d <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)<span class="co">#</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(p<span class="dv">-1</span><span class="sc">+</span>d<span class="sc">+</span>q<span class="dv">-1</span><span class="sc">&lt;=</span><span class="dv">8</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>        model<span class="ot">&lt;-</span> <span class="fu">Arima</span>(temp.ts,<span class="at">order=</span><span class="fu">c</span>(p<span class="dv">-1</span>,d,q<span class="dv">-1</span>),<span class="at">include.drift=</span><span class="cn">FALSE</span>) </span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        ls[i,]<span class="ot">=</span> <span class="fu">c</span>(p<span class="dv">-1</span>,d,q<span class="dv">-1</span>,model<span class="sc">$</span>aic,model<span class="sc">$</span>bic,model<span class="sc">$</span>aicc)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">#print(i)</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>temp<span class="ot">=</span> <span class="fu">as.data.frame</span>(ls)</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(temp)<span class="ot">=</span> <span class="fu">c</span>(<span class="st">"p"</span>,<span class="st">"d"</span>,<span class="st">"q"</span>,<span class="st">"AIC"</span>,<span class="st">"BIC"</span>,<span class="st">"AICc"</span>)</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">p</th>
<th style="text-align: right;">d</th>
<th style="text-align: right;">q</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">AICc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11745.382</td>
<td style="text-align: right;">-11734.197</td>
<td style="text-align: right;">-11745.376</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-10278.151</td>
<td style="text-align: right;">-10272.559</td>
<td style="text-align: right;">-10278.149</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-8045.864</td>
<td style="text-align: right;">-8040.273</td>
<td style="text-align: right;">-8045.862</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11747.304</td>
<td style="text-align: right;">-11730.527</td>
<td style="text-align: right;">-11747.292</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11730.871</td>
<td style="text-align: right;">-11719.688</td>
<td style="text-align: right;">-11730.865</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-10262.373</td>
<td style="text-align: right;">-10251.190</td>
<td style="text-align: right;">-10262.367</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11747.827</td>
<td style="text-align: right;">-11725.458</td>
<td style="text-align: right;">-11747.807</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11732.784</td>
<td style="text-align: right;">-11716.009</td>
<td style="text-align: right;">-11732.772</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11681.966</td>
<td style="text-align: right;">-11665.192</td>
<td style="text-align: right;">-11681.954</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11748.308</td>
<td style="text-align: right;">-11720.346</td>
<td style="text-align: right;">-11748.277</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11733.337</td>
<td style="text-align: right;">-11710.970</td>
<td style="text-align: right;">-11733.317</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11663.255</td>
<td style="text-align: right;">-11640.889</td>
<td style="text-align: right;">-11663.235</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11748.368</td>
<td style="text-align: right;">-11714.814</td>
<td style="text-align: right;">-11748.326</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11733.762</td>
<td style="text-align: right;">-11705.803</td>
<td style="text-align: right;">-11733.732</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11675.645</td>
<td style="text-align: right;">-11647.688</td>
<td style="text-align: right;">-11675.615</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11747.576</td>
<td style="text-align: right;">-11730.799</td>
<td style="text-align: right;">-11747.564</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-10957.920</td>
<td style="text-align: right;">-10946.736</td>
<td style="text-align: right;">-10957.914</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-9368.017</td>
<td style="text-align: right;">-9356.834</td>
<td style="text-align: right;">-9368.011</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11747.493</td>
<td style="text-align: right;">-11725.123</td>
<td style="text-align: right;">-11747.472</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11733.042</td>
<td style="text-align: right;">-11716.267</td>
<td style="text-align: right;">-11733.030</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-10940.935</td>
<td style="text-align: right;">-10924.161</td>
<td style="text-align: right;">-10940.923</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11746.590</td>
<td style="text-align: right;">-11718.628</td>
<td style="text-align: right;">-11746.560</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11732.974</td>
<td style="text-align: right;">-11710.607</td>
<td style="text-align: right;">-11732.954</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11666.519</td>
<td style="text-align: right;">-11644.153</td>
<td style="text-align: right;">-11666.499</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11747.175</td>
<td style="text-align: right;">-11713.620</td>
<td style="text-align: right;">-11747.132</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11734.648</td>
<td style="text-align: right;">-11706.689</td>
<td style="text-align: right;">-11734.618</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11652.780</td>
<td style="text-align: right;">-11624.823</td>
<td style="text-align: right;">-11652.749</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11758.279</td>
<td style="text-align: right;">-11719.133</td>
<td style="text-align: right;">-11758.223</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11737.956</td>
<td style="text-align: right;">-11704.405</td>
<td style="text-align: right;">-11737.913</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11698.618</td>
<td style="text-align: right;">-11665.070</td>
<td style="text-align: right;">-11698.575</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11748.013</td>
<td style="text-align: right;">-11725.644</td>
<td style="text-align: right;">-11747.993</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11155.537</td>
<td style="text-align: right;">-11138.762</td>
<td style="text-align: right;">-11155.525</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-9939.557</td>
<td style="text-align: right;">-9922.783</td>
<td style="text-align: right;">-9939.545</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11746.403</td>
<td style="text-align: right;">-11718.441</td>
<td style="text-align: right;">-11746.373</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11733.515</td>
<td style="text-align: right;">-11711.147</td>
<td style="text-align: right;">-11733.495</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11137.912</td>
<td style="text-align: right;">-11115.547</td>
<td style="text-align: right;">-11137.892</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11752.330</td>
<td style="text-align: right;">-11718.776</td>
<td style="text-align: right;">-11752.288</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11729.981</td>
<td style="text-align: right;">-11702.022</td>
<td style="text-align: right;">-11729.950</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11691.835</td>
<td style="text-align: right;">-11663.878</td>
<td style="text-align: right;">-11691.805</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11746.133</td>
<td style="text-align: right;">-11706.987</td>
<td style="text-align: right;">-11746.076</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11730.281</td>
<td style="text-align: right;">-11696.730</td>
<td style="text-align: right;">-11730.239</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11691.169</td>
<td style="text-align: right;">-11657.621</td>
<td style="text-align: right;">-11691.127</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11756.256</td>
<td style="text-align: right;">-11711.517</td>
<td style="text-align: right;">-11756.183</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11731.122</td>
<td style="text-align: right;">-11691.979</td>
<td style="text-align: right;">-11731.065</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11690.040</td>
<td style="text-align: right;">-11650.901</td>
<td style="text-align: right;">-11689.983</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11747.448</td>
<td style="text-align: right;">-11719.486</td>
<td style="text-align: right;">-11747.417</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11257.341</td>
<td style="text-align: right;">-11234.974</td>
<td style="text-align: right;">-11257.321</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-10215.582</td>
<td style="text-align: right;">-10193.216</td>
<td style="text-align: right;">-10215.562</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11746.623</td>
<td style="text-align: right;">-11713.069</td>
<td style="text-align: right;">-11746.581</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11732.916</td>
<td style="text-align: right;">-11704.957</td>
<td style="text-align: right;">-11732.886</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11239.257</td>
<td style="text-align: right;">-11211.301</td>
<td style="text-align: right;">-11239.227</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11746.236</td>
<td style="text-align: right;">-11707.089</td>
<td style="text-align: right;">-11746.179</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11732.070</td>
<td style="text-align: right;">-11698.519</td>
<td style="text-align: right;">-11732.028</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11684.516</td>
<td style="text-align: right;">-11650.968</td>
<td style="text-align: right;">-11684.473</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11744.189</td>
<td style="text-align: right;">-11699.451</td>
<td style="text-align: right;">-11744.117</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11724.890</td>
<td style="text-align: right;">-11685.747</td>
<td style="text-align: right;">-11724.833</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11693.643</td>
<td style="text-align: right;">-11654.503</td>
<td style="text-align: right;">-11693.586</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11755.169</td>
<td style="text-align: right;">-11704.838</td>
<td style="text-align: right;">-11755.078</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11719.422</td>
<td style="text-align: right;">-11674.687</td>
<td style="text-align: right;">-11719.349</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11748.903</td>
<td style="text-align: right;">-11715.349</td>
<td style="text-align: right;">-11748.860</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-11370.038</td>
<td style="text-align: right;">-11342.078</td>
<td style="text-align: right;">-11370.007</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">-10473.688</td>
<td style="text-align: right;">-10445.731</td>
<td style="text-align: right;">-10473.658</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11759.226</td>
<td style="text-align: right;">-11720.079</td>
<td style="text-align: right;">-11759.169</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11734.363</td>
<td style="text-align: right;">-11700.811</td>
<td style="text-align: right;">-11734.320</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">-11351.471</td>
<td style="text-align: right;">-11317.923</td>
<td style="text-align: right;">-11351.429</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11757.224</td>
<td style="text-align: right;">-11712.485</td>
<td style="text-align: right;">-11757.151</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11744.694</td>
<td style="text-align: right;">-11705.551</td>
<td style="text-align: right;">-11744.637</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">-11692.959</td>
<td style="text-align: right;">-11653.820</td>
<td style="text-align: right;">-11692.903</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11755.526</td>
<td style="text-align: right;">-11705.194</td>
<td style="text-align: right;">-11755.435</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">-11741.229</td>
<td style="text-align: right;">-11696.494</td>
<td style="text-align: right;">-11741.156</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">-11759.351</td>
<td style="text-align: right;">-11703.428</td>
<td style="text-align: right;">-11759.240</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="evaluations-using-aic-bic-and-aicc" class="level3">
<h3 class="anchored" data-anchor-id="evaluations-using-aic-bic-and-aicc">Evaluations using AIC, BIC, and AICc</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   p d q       AIC       BIC      AICc
71 4 0 4 -11759.35 -11703.43 -11759.24</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  p d q       AIC      BIC      AICc
1 0 0 0 -11745.38 -11734.2 -11745.38</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   p d q       AIC       BIC      AICc
71 4 0 4 -11759.35 -11703.43 -11759.24</code></pre>
</div>
</div>
<p>We can see that for (4,0,4) has the lowest AIC and AICc. For (0,0,0), it has the lowest BIC. Therefore we should compare them.</p>
</section>
</section>
<section id="compare-arima-models-for-404-and-arima-000" class="level2">
<h2 class="anchored" data-anchor-id="compare-arima-models-for-404-and-arima-000">Compare ARIMA Models for (4,0,4) and ARIMA (0,0,0)</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-13-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>final  value -4.389022 
stopped after 100 iterations
$fit

Call:
arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    xreg = xmean, include.mean = FALSE, transform.pars = trans, fixed = fixed, 
    optim.control = list(trace = trc, REPORT = 1, reltol = tol))

Coefficients:
         ar1     ar2      ar3      ar4     ma1      ma2     ma3     ma4   xmean
      -0.259  0.8386  -0.2731  -0.8354  0.2154  -0.8339  0.2782  0.7779  -1e-04
s.e.     NaN  0.0636      NaN   0.0753     NaN   0.0720     NaN  0.0891   3e-04

sigma^2 estimated as 0.0001541:  log likelihood = 5889.68,  aic = -11759.35

$degrees_of_freedom
[1] 1974

$ttable
      Estimate     SE  t.value p.value
ar1    -0.2590    NaN      NaN     NaN
ar2     0.8386 0.0636  13.1812  0.0000
ar3    -0.2731    NaN      NaN     NaN
ar4    -0.8354 0.0753 -11.0975  0.0000
ma1     0.2154    NaN      NaN     NaN
ma2    -0.8339 0.0720 -11.5739  0.0000
ma3     0.2782    NaN      NaN     NaN
ma4     0.7779 0.0891   8.7279  0.0000
xmean  -0.0001 0.0003  -0.4742  0.6354

$AIC
[1] -5.930081

$AICc
[1] -5.930035

$BIC
[1] -5.90188

NA</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
sigma^2 estimated as 0.0001564:  log likelihood = 5874.69,  aic = -11745.38

$degrees_of_freedom
[1] 1982

$ttable
      Estimate    SE t.value p.value
xmean   -1e-04 3e-04 -0.4223  0.6729

$AIC
[1] -5.923037

$AICc
[1] -5.923036

$BIC
[1] -5.917396</code></pre>
</div>
</div>
<p>Based on the model comparsion and diagnostic, I think that ARIMA Models for (4,0,4) is better with smaller evaluation matrices and it is more suitable and proper based on acf and pacf plots. In addition, the acf of residule is also more stationary.</p>
</section>
<section id="fit-the-best-one-arima404" class="level2">
<h2 class="anchored" data-anchor-id="fit-the-best-one-arima404">Fit the best one ARIMA(4,0,4)</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(temp.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">4</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = temp.ts, order = c(4, 0, 4))

Coefficients:
         ar1     ar2      ar3      ar4     ma1      ma2     ma3     ma4
      -0.259  0.8386  -0.2731  -0.8354  0.2154  -0.8339  0.2782  0.7779
s.e.     NaN  0.0636      NaN   0.0753     NaN   0.0720     NaN  0.0891
      intercept
         -1e-04
s.e.      3e-04

sigma^2 estimated as 0.0001541:  log likelihood = 5889.68,  aic = -11759.35

Training set error measures:
                      ME       RMSE         MAE MPE MAPE      MASE        ACF1
Training set 5.06567e-06 0.01241243 0.008686146 NaN  Inf 0.6859388 0.003727206</code></pre>
</div>
</div>
</section>
<section id="get-the-residuals-of-the-arima-model" class="level2">
<h2 class="anchored" data-anchor-id="get-the-residuals-of-the-arima-model">get the residuals of the arima model</h2>
<div class="cell">
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that mostly, the residual is stationary however the residuals of ARIMA model indicates some flutucations. In this case, I think that we can try to fit an ARCH/GARCH model.</p>
<p>Therefore, I think we can further making analysis by adding GARCH models to see if we should use it.</p>
</section>
<section id="model-diagnostics-for-archgarch-model" class="level2">
<h2 class="anchored" data-anchor-id="model-diagnostics-for-archgarch-model">Model Diagnostics For ARCH/GARCH model</h2>
<section id="acf-and-pacf-for-squared-residuals" class="level3">
<h3 class="anchored" data-anchor-id="acf-and-pacf-for-squared-residuals">Acf and pacf for squared residuals</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that it is not yet stationary for squared residuals. GARCH model can be applied.</p>
<p>However, no matter what, I still think that I should make a further diagnostic and compare the results.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>mean_res <span class="ot">&lt;-</span> <span class="fu">mean</span>(arima.res, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>sd_res <span class="ot">&lt;-</span> <span class="fu">sd</span>(arima.res, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize the residuals</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>arima.res <span class="ot">&lt;-</span> (arima.res <span class="sc">-</span> mean_res) <span class="sc">/</span> sd_res</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">list</span>() <span class="do">## set counter</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>) {</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (q <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>) {</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>model[[cc]] <span class="ot">&lt;-</span> <span class="fu">garch</span>(arima.res,<span class="at">order=</span><span class="fu">c</span>(q,p),<span class="at">trace=</span>F)</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> cc <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="do">## get AIC values for model evaluation</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>GARCH_AIC <span class="ot">&lt;-</span> <span class="fu">sapply</span>(model, AIC) <span class="do">## model with lowest AIC is the best</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 35</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
garch(x = arima.res, order = c(q, p), trace = F)

Coefficient(s):
       a0         a1         a2         a3         a4         a5         b1  
3.258e-01  1.697e-01  5.803e-02  4.661e-02  8.038e-03  1.044e-01  3.080e-03  
       b2         b3         b4         b5         b6         b7  
1.078e-14  6.203e-02  2.340e-02  1.280e-02  3.958e-02  1.607e-01  </code></pre>
</div>
</div>
<p>From here, I think that garch(5,6) is a good choice</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: Packages 'fBasics', 'timeDate', and 'timeSeries' are no longer
attached to the search() path when 'fGarch' is attached.

If needed attach them yourself in your R script by e.g.,
        require("timeSeries")</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'fGarch'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:TTR':

    volatility</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(5, 6), data = arima.res, trace = F) 

Mean and Variance Equation:
 data ~ garch(5, 6)
&lt;environment: 0x0000019edf116ab8&gt;
 [data = arima.res]

Conditional Distribution:
 norm 

Coefficient(s):
         mu        omega       alpha1       alpha2       alpha3       alpha4  
-1.6874e-16   2.2543e-01   1.3768e-01   5.5858e-02   2.9213e-02   1.0000e-08  
     alpha5        beta1        beta2        beta3        beta4        beta5  
 7.5133e-02   1.0000e-08   1.0000e-08   3.1469e-01   1.6925e-01   1.0000e-08  
      beta6  
 1.0000e-08  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     -1.687e-16   2.052e-02    0.000 1.000000    
omega   2.254e-01   2.805e-01    0.804 0.421614    
alpha1  1.377e-01   3.905e-02    3.525 0.000423 ***
alpha2  5.586e-02   9.879e-02    0.565 0.571769    
alpha3  2.921e-02   1.250e-01    0.234 0.815173    
alpha4  1.000e-08   1.262e-01    0.000 1.000000    
alpha5  7.513e-02   6.684e-02    1.124 0.260997    
beta1   1.000e-08   7.142e-01    0.000 1.000000    
beta2   1.000e-08   3.978e-01    0.000 1.000000    
beta3   3.147e-01   1.955e-01    1.610 0.107500    
beta4   1.692e-01   2.506e-01    0.675 0.499448    
beta5   1.000e-08   4.406e-01    0.000 1.000000    
beta6   1.000e-08         NaN      NaN      NaN    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 -2704.735    normalized:  -1.363961 

Description:
 Mon Nov 20 22:29:40 2023 by user: yzh20 


Standardised Residuals Tests:
                                   Statistic    p-Value
 Jarque-Bera Test   R    Chi^2  1567.0838773 0.00000000
 Shapiro-Wilk Test  R    W         0.9555035 0.00000000
 Ljung-Box Test     R    Q(10)     7.4317759 0.68415000
 Ljung-Box Test     R    Q(15)    12.8665717 0.61260318
 Ljung-Box Test     R    Q(20)    28.7236060 0.09334599
 Ljung-Box Test     R^2  Q(10)     2.5905318 0.98948975
 Ljung-Box Test     R^2  Q(15)     5.0826087 0.99140358
 Ljung-Box Test     R^2  Q(20)     6.2308460 0.99854770
 LM Arch Test       R    TR^2      3.5306982 0.99049639

Information Criterion Statistics:
     AIC      BIC      SIC     HQIC 
2.741034 2.777696 2.740949 2.754502 </code></pre>
</div>
</div>
<p>The results shows that (5,6) is not an optimal fit. The coefficients are not significant.</p>
<p>Therefore, let us try GARCH(1,2) and GARCH(1,1)</p>
</section>
<section id="try-to-compare-with-garch11garch12" class="level3">
<h3 class="anchored" data-anchor-id="try-to-compare-with-garch11garch12">Try to compare with Garch(1,1),Garch(1,2)</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(1, 1), data = arima.res, trace = F) 

Mean and Variance Equation:
 data ~ garch(1, 1)
&lt;environment: 0x0000019edddc1248&gt;
 [data = arima.res]

Conditional Distribution:
 norm 

Coefficient(s):
         mu        omega       alpha1        beta1  
-1.6874e-16   9.3778e-02   1.0948e-01   7.9863e-01  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     -1.687e-16   2.030e-02    0.000  1.00000    
omega   9.378e-02   2.893e-02    3.241  0.00119 ** 
alpha1  1.095e-01   2.170e-02    5.045 4.53e-07 ***
beta1   7.986e-01   4.545e-02   17.570  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 -2713.414    normalized:  -1.368338 

Description:
 Mon Nov 20 22:29:40 2023 by user: yzh20 


Standardised Residuals Tests:
                                  Statistic   p-Value
 Jarque-Bera Test   R    Chi^2  1842.376562 0.0000000
 Shapiro-Wilk Test  R    W         0.952537 0.0000000
 Ljung-Box Test     R    Q(10)     7.407214 0.6865228
 Ljung-Box Test     R    Q(15)    12.974946 0.6042332
 Ljung-Box Test     R    Q(20)    28.397143 0.1003264
 Ljung-Box Test     R^2  Q(10)     3.461572 0.9683871
 Ljung-Box Test     R^2  Q(15)     6.479211 0.9705262
 Ljung-Box Test     R^2  Q(20)     7.857064 0.9927719
 LM Arch Test       R    TR^2      4.561534 0.9710469

Information Criterion Statistics:
     AIC      BIC      SIC     HQIC 
2.740710 2.751991 2.740702 2.744854 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(1, 2), data = arima.res, trace = F) 

Mean and Variance Equation:
 data ~ garch(1, 2)
&lt;environment: 0x0000019edf1f7208&gt;
 [data = arima.res]

Conditional Distribution:
 norm 

Coefficient(s):
         mu        omega       alpha1        beta1        beta2  
-1.6874e-16   1.2838e-01   1.5585e-01   2.8817e-01   4.3124e-01  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     -1.687e-16   2.027e-02    0.000 1.000000    
omega   1.284e-01   4.092e-02    3.137 0.001706 ** 
alpha1  1.559e-01   3.167e-02    4.922 8.58e-07 ***
beta1   2.882e-01   1.383e-01    2.083 0.037258 *  
beta2   4.312e-01   1.199e-01    3.598 0.000321 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 -2711.124    normalized:  -1.367183 

Description:
 Mon Nov 20 22:29:40 2023 by user: yzh20 


Standardised Residuals Tests:
                                   Statistic   p-Value
 Jarque-Bera Test   R    Chi^2  1736.0814311 0.0000000
 Shapiro-Wilk Test  R    W         0.9536721 0.0000000
 Ljung-Box Test     R    Q(10)     7.0492350 0.7207888
 Ljung-Box Test     R    Q(15)    12.5374314 0.6379784
 Ljung-Box Test     R    Q(20)    27.7833434 0.1146281
 Ljung-Box Test     R^2  Q(10)     4.7226574 0.9089183
 Ljung-Box Test     R^2  Q(15)     7.8011003 0.9315089
 Ljung-Box Test     R^2  Q(20)     9.0154593 0.9827275
 LM Arch Test       R    TR^2      6.1485452 0.9084094

Information Criterion Statistics:
     AIC      BIC      SIC     HQIC 
2.739409 2.753510 2.739396 2.744589 </code></pre>
</div>
</div>
<p>Now, it seems that the GARCH(1,2) is better with more siginificant components.</p>
</section>
</section>
<section id="final-model-arima-404-garch12" class="level2">
<h2 class="anchored" data-anchor-id="final-model-arima-404-garch12">Final Model: ARIMA (4,0,4) + GARCH(1,2)</h2>
<p>The final model consist of the ARIMA modeling with no differencing and the GARCH model. This model combined the two different models to evaluate and capture the returns. The final one is better than the separate ones.</p>
<section id="forecast-arima-404-garch12" class="level3">
<h3 class="anchored" data-anchor-id="forecast-arima-404-garch12">Forecast: ARIMA (4,0,4) + GARCH(1,2)</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>final.fit <span class="ot">&lt;-</span> <span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">2</span>), arima.res,<span class="at">trace =</span> F)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(final.fit, <span class="at">n.ahead =</span> <span class="dv">365</span>, <span class="at">plot=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     meanForecast meanError standardDeviation lowerInterval upperInterval
1   -1.687411e-16 0.8793496         0.8793496     -1.723494      1.723494
2   -1.687411e-16 0.9211444         0.9211444     -1.805410      1.805410
3   -1.687411e-16 0.9157470         0.9157470     -1.794831      1.794831
4   -1.687411e-16 0.9309361         0.9309361     -1.824601      1.824601
5   -1.687411e-16 0.9353186         0.9353186     -1.833191      1.833191
6   -1.687411e-16 0.9436888         0.9436888     -1.849596      1.849596
7   -1.687411e-16 0.9492413         0.9492413     -1.860479      1.860479
8   -1.687411e-16 0.9552530         0.9552530     -1.872261      1.872261
9   -1.687411e-16 0.9602731         0.9602731     -1.882101      1.882101
10  -1.687411e-16 0.9650553         0.9650553     -1.891474      1.891474
11  -1.687411e-16 0.9693126         0.9693126     -1.899818      1.899818
12  -1.687411e-16 0.9732389         0.9732389     -1.907513      1.907513
13  -1.687411e-16 0.9767967         0.9767967     -1.914486      1.914486
14  -1.687411e-16 0.9800518         0.9800518     -1.920866      1.920866
15  -1.687411e-16 0.9830166         0.9830166     -1.926677      1.926677
16  -1.687411e-16 0.9857245         0.9857245     -1.931984      1.931984
17  -1.687411e-16 0.9881952         0.9881952     -1.936827      1.936827
18  -1.687411e-16 0.9904515         0.9904515     -1.941249      1.941249
19  -1.687411e-16 0.9925118         0.9925118     -1.945287      1.945287
20  -1.687411e-16 0.9943938         0.9943938     -1.948976      1.948976
21  -1.687411e-16 0.9961130         0.9961130     -1.952346      1.952346
22  -1.687411e-16 0.9976839         0.9976839     -1.955425      1.955425
23  -1.687411e-16 0.9991195         0.9991195     -1.958238      1.958238
24  -1.687411e-16 1.0004315         1.0004315     -1.960810      1.960810
25  -1.687411e-16 1.0016307         1.0016307     -1.963160      1.963160
26  -1.687411e-16 1.0027270         1.0027270     -1.965309      1.965309
27  -1.687411e-16 1.0037294         1.0037294     -1.967273      1.967273
28  -1.687411e-16 1.0046458         1.0046458     -1.969070      1.969070
29  -1.687411e-16 1.0054838         1.0054838     -1.970712      1.970712
30  -1.687411e-16 1.0062502         1.0062502     -1.972214      1.972214
31  -1.687411e-16 1.0069511         1.0069511     -1.973588      1.973588
32  -1.687411e-16 1.0075921         1.0075921     -1.974844      1.974844
33  -1.687411e-16 1.0081784         1.0081784     -1.975993      1.975993
34  -1.687411e-16 1.0087147         1.0087147     -1.977044      1.977044
35  -1.687411e-16 1.0092053         1.0092053     -1.978006      1.978006
36  -1.687411e-16 1.0096540         1.0096540     -1.978886      1.978886
37  -1.687411e-16 1.0100646         1.0100646     -1.979690      1.979690
38  -1.687411e-16 1.0104402         1.0104402     -1.980426      1.980426
39  -1.687411e-16 1.0107838         1.0107838     -1.981100      1.981100
40  -1.687411e-16 1.0110982         1.0110982     -1.981716      1.981716
41  -1.687411e-16 1.0113858         1.0113858     -1.982280      1.982280
42  -1.687411e-16 1.0116490         1.0116490     -1.982796      1.982796
43  -1.687411e-16 1.0118898         1.0118898     -1.983268      1.983268
44  -1.687411e-16 1.0121101         1.0121101     -1.983699      1.983699
45  -1.687411e-16 1.0123118         1.0123118     -1.984095      1.984095
46  -1.687411e-16 1.0124962         1.0124962     -1.984456      1.984456
47  -1.687411e-16 1.0126651         1.0126651     -1.984787      1.984787
48  -1.687411e-16 1.0128195         1.0128195     -1.985090      1.985090
49  -1.687411e-16 1.0129609         1.0129609     -1.985367      1.985367
50  -1.687411e-16 1.0130902         1.0130902     -1.985620      1.985620
51  -1.687411e-16 1.0132086         1.0132086     -1.985852      1.985852
52  -1.687411e-16 1.0133169         1.0133169     -1.986065      1.986065
53  -1.687411e-16 1.0134161         1.0134161     -1.986259      1.986259
54  -1.687411e-16 1.0135068         1.0135068     -1.986437      1.986437
55  -1.687411e-16 1.0135898         1.0135898     -1.986600      1.986600
56  -1.687411e-16 1.0136658         1.0136658     -1.986748      1.986748
57  -1.687411e-16 1.0137353         1.0137353     -1.986885      1.986885
58  -1.687411e-16 1.0137989         1.0137989     -1.987009      1.987009
59  -1.687411e-16 1.0138572         1.0138572     -1.987124      1.987124
60  -1.687411e-16 1.0139105         1.0139105     -1.987228      1.987228
61  -1.687411e-16 1.0139592         1.0139592     -1.987324      1.987324
62  -1.687411e-16 1.0140039         1.0140039     -1.987411      1.987411
63  -1.687411e-16 1.0140447         1.0140447     -1.987491      1.987491
64  -1.687411e-16 1.0140821         1.0140821     -1.987564      1.987564
65  -1.687411e-16 1.0141163         1.0141163     -1.987631      1.987631
66  -1.687411e-16 1.0141476         1.0141476     -1.987693      1.987693
67  -1.687411e-16 1.0141763         1.0141763     -1.987749      1.987749
68  -1.687411e-16 1.0142025         1.0142025     -1.987800      1.987800
69  -1.687411e-16 1.0142265         1.0142265     -1.987847      1.987847
70  -1.687411e-16 1.0142484         1.0142484     -1.987890      1.987890
71  -1.687411e-16 1.0142685         1.0142685     -1.987930      1.987930
72  -1.687411e-16 1.0142869         1.0142869     -1.987966      1.987966
73  -1.687411e-16 1.0143038         1.0143038     -1.987999      1.987999
74  -1.687411e-16 1.0143192         1.0143192     -1.988029      1.988029
75  -1.687411e-16 1.0143333         1.0143333     -1.988057      1.988057
76  -1.687411e-16 1.0143462         1.0143462     -1.988082      1.988082
77  -1.687411e-16 1.0143580         1.0143580     -1.988105      1.988105
78  -1.687411e-16 1.0143688         1.0143688     -1.988126      1.988126
79  -1.687411e-16 1.0143787         1.0143787     -1.988146      1.988146
80  -1.687411e-16 1.0143878         1.0143878     -1.988163      1.988163
81  -1.687411e-16 1.0143960         1.0143960     -1.988180      1.988180
82  -1.687411e-16 1.0144036         1.0144036     -1.988195      1.988195
83  -1.687411e-16 1.0144106         1.0144106     -1.988208      1.988208
84  -1.687411e-16 1.0144169         1.0144169     -1.988221      1.988221
85  -1.687411e-16 1.0144227         1.0144227     -1.988232      1.988232
86  -1.687411e-16 1.0144281         1.0144281     -1.988242      1.988242
87  -1.687411e-16 1.0144329         1.0144329     -1.988252      1.988252
88  -1.687411e-16 1.0144374         1.0144374     -1.988261      1.988261
89  -1.687411e-16 1.0144415         1.0144415     -1.988269      1.988269
90  -1.687411e-16 1.0144452         1.0144452     -1.988276      1.988276
91  -1.687411e-16 1.0144486         1.0144486     -1.988283      1.988283
92  -1.687411e-16 1.0144517         1.0144517     -1.988289      1.988289
93  -1.687411e-16 1.0144546         1.0144546     -1.988294      1.988294
94  -1.687411e-16 1.0144572         1.0144572     -1.988300      1.988300
95  -1.687411e-16 1.0144596         1.0144596     -1.988304      1.988304
96  -1.687411e-16 1.0144618         1.0144618     -1.988309      1.988309
97  -1.687411e-16 1.0144638         1.0144638     -1.988313      1.988313
98  -1.687411e-16 1.0144656         1.0144656     -1.988316      1.988316
99  -1.687411e-16 1.0144673         1.0144673     -1.988319      1.988319
100 -1.687411e-16 1.0144689         1.0144689     -1.988322      1.988322
101 -1.687411e-16 1.0144703         1.0144703     -1.988325      1.988325
102 -1.687411e-16 1.0144716         1.0144716     -1.988328      1.988328
103 -1.687411e-16 1.0144727         1.0144727     -1.988330      1.988330
104 -1.687411e-16 1.0144738         1.0144738     -1.988332      1.988332
105 -1.687411e-16 1.0144748         1.0144748     -1.988334      1.988334
106 -1.687411e-16 1.0144757         1.0144757     -1.988336      1.988336
107 -1.687411e-16 1.0144765         1.0144765     -1.988337      1.988337
108 -1.687411e-16 1.0144773         1.0144773     -1.988339      1.988339
109 -1.687411e-16 1.0144780         1.0144780     -1.988340      1.988340
110 -1.687411e-16 1.0144786         1.0144786     -1.988342      1.988342
111 -1.687411e-16 1.0144792         1.0144792     -1.988343      1.988343
112 -1.687411e-16 1.0144797         1.0144797     -1.988344      1.988344
113 -1.687411e-16 1.0144802         1.0144802     -1.988345      1.988345
114 -1.687411e-16 1.0144807         1.0144807     -1.988346      1.988346
115 -1.687411e-16 1.0144811         1.0144811     -1.988346      1.988346
116 -1.687411e-16 1.0144815         1.0144815     -1.988347      1.988347
117 -1.687411e-16 1.0144818         1.0144818     -1.988348      1.988348
118 -1.687411e-16 1.0144821         1.0144821     -1.988348      1.988348
119 -1.687411e-16 1.0144824         1.0144824     -1.988349      1.988349
120 -1.687411e-16 1.0144827         1.0144827     -1.988349      1.988349
121 -1.687411e-16 1.0144829         1.0144829     -1.988350      1.988350
122 -1.687411e-16 1.0144831         1.0144831     -1.988350      1.988350
123 -1.687411e-16 1.0144833         1.0144833     -1.988351      1.988351
124 -1.687411e-16 1.0144835         1.0144835     -1.988351      1.988351
125 -1.687411e-16 1.0144837         1.0144837     -1.988351      1.988351
126 -1.687411e-16 1.0144838         1.0144838     -1.988352      1.988352
127 -1.687411e-16 1.0144840         1.0144840     -1.988352      1.988352
128 -1.687411e-16 1.0144841         1.0144841     -1.988352      1.988352
129 -1.687411e-16 1.0144842         1.0144842     -1.988353      1.988353
130 -1.687411e-16 1.0144843         1.0144843     -1.988353      1.988353
131 -1.687411e-16 1.0144844         1.0144844     -1.988353      1.988353
132 -1.687411e-16 1.0144845         1.0144845     -1.988353      1.988353
133 -1.687411e-16 1.0144846         1.0144846     -1.988353      1.988353
134 -1.687411e-16 1.0144847         1.0144847     -1.988353      1.988353
135 -1.687411e-16 1.0144847         1.0144847     -1.988354      1.988354
136 -1.687411e-16 1.0144848         1.0144848     -1.988354      1.988354
137 -1.687411e-16 1.0144849         1.0144849     -1.988354      1.988354
138 -1.687411e-16 1.0144849         1.0144849     -1.988354      1.988354
139 -1.687411e-16 1.0144850         1.0144850     -1.988354      1.988354
140 -1.687411e-16 1.0144850         1.0144850     -1.988354      1.988354
141 -1.687411e-16 1.0144850         1.0144850     -1.988354      1.988354
142 -1.687411e-16 1.0144851         1.0144851     -1.988354      1.988354
143 -1.687411e-16 1.0144851         1.0144851     -1.988354      1.988354
144 -1.687411e-16 1.0144851         1.0144851     -1.988354      1.988354
145 -1.687411e-16 1.0144852         1.0144852     -1.988354      1.988354
146 -1.687411e-16 1.0144852         1.0144852     -1.988354      1.988354
147 -1.687411e-16 1.0144852         1.0144852     -1.988355      1.988355
148 -1.687411e-16 1.0144852         1.0144852     -1.988355      1.988355
149 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
150 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
151 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
152 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
153 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
154 -1.687411e-16 1.0144853         1.0144853     -1.988355      1.988355
155 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
156 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
157 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
158 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
159 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
160 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
161 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
162 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
163 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
164 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
165 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
166 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
167 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
168 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
169 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
170 -1.687411e-16 1.0144854         1.0144854     -1.988355      1.988355
171 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
172 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
173 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
174 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
175 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
176 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
177 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
178 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
179 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
180 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
181 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
182 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
183 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
184 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
185 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
186 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
187 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
188 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
189 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
190 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
191 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
192 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
193 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
194 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
195 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
196 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
197 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
198 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
199 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
200 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
201 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
202 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
203 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
204 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
205 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
206 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
207 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
208 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
209 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
210 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
211 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
212 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
213 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
214 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
215 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
216 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
217 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
218 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
219 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
220 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
221 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
222 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
223 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
224 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
225 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
226 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
227 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
228 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
229 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
230 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
231 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
232 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
233 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
234 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
235 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
236 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
237 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
238 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
239 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
240 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
241 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
242 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
243 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
244 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
245 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
246 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
247 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
248 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
249 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
250 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
251 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
252 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
253 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
254 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
255 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
256 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
257 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
258 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
259 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
260 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
261 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
262 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
263 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
264 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
265 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
266 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
267 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
268 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
269 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
270 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
271 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
272 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
273 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
274 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
275 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
276 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
277 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
278 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
279 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
280 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
281 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
282 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
283 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
284 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
285 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
286 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
287 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
288 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
289 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
290 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
291 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
292 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
293 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
294 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
295 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
296 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
297 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
298 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
299 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
300 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
301 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
302 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
303 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
304 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
305 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
306 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
307 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
308 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
309 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
310 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
311 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
312 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
313 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
314 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
315 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
316 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
317 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
318 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
319 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
320 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
321 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
322 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
323 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
324 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
325 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
326 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
327 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
328 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
329 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
330 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
331 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
332 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
333 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
334 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
335 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
336 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
337 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
338 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
339 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
340 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
341 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
342 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
343 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
344 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
345 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
346 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
347 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
348 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
349 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
350 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
351 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
352 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
353 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
354 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
355 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
356 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
357 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
358 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
359 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
360 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
361 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
362 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
363 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
364 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355
365 -1.687411e-16 1.0144855         1.0144855     -1.988355      1.988355</code></pre>
</div>
</div>
<p>We can see that the model captures the relatively constant variation with the confidence intervals fitted in the range. This means that the model combination is effective to predict the future values. The overall interpretation and prediction on the historical dataset is reasonable.</p>
</section>
<section id="box-ljung-test" class="level3">
<h3 class="anchored" data-anchor-id="box-ljung-test">Box Ljung Test</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>box_ljung_test <span class="ot">&lt;-</span> <span class="fu">Box.test</span>(arima.res, <span class="at">lag =</span> <span class="dv">10</span>, <span class="at">type =</span> <span class="st">"Ljung-Box"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the test results</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>box_ljung_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  arima.res
X-squared = 5.2087, df = 10, p-value = 0.8768</code></pre>
</div>
</div>
<p>The Box Ljung yields the simiarl results of my model choosing. The p-value is above a significance level 0.05, therefore, I do not reject the null hypothesis. This suggests that the residuals do not exhibit autocorrelation and that the model is adequate. This conclusion alignes that my models choosing capture the dataset and make predictions well.</p>
</section>
<section id="the-equation" class="level3">
<h3 class="anchored" data-anchor-id="the-equation">The Equation</h3>
<p>The ARIMA (0,2,3) + Garch(1,0) model is defined as: The combined ARIMA(0,2,3) + GARCH(1,0) model is defined as:</p>
<p>The ARIMA(0,2,3) + GARCH(1,0) model is defined as:</p>
<p>[ <span class="math display">\[\begin{align*}
(1 - B)^2 X_t &amp;= \theta_1 \varepsilon_{t-1} + \theta_2 \varepsilon_{t-2} + \theta_3 \varepsilon_{t-3} + \varepsilon_t, \\
\text{where } \varepsilon_t &amp;\sim N(0, \sigma_t^2), \\
\sigma_t^2 &amp;= \alpha_0 + \alpha_1 \varepsilon_{t-1}^2 + \beta_1 \sigma_{t-1}^2.
\end{align*}\]</span> ]</p>
<p>Here: - ( (1 - B)^2 X_t ) represents the second difference of the time series ( X_t ). - ( _1, _2, _3 ) are the parameters of the moving average (MA) component. - ( _t ) is the white noise error term at time ( t ). - ( _t^2 ) is the conditional variance at time ( t ). - ( _0, _1 ) are the coefficients of the GARCH model’s variance equation. - ( _1 ) is the coefficient for the lagged conditional variance.</p>
</section>
</section>
</section>
<section id="home-value-sale-price-and-rental-price-return-analysis" class="level1">
<h1>Home Value, Sale Price, and Rental Price Return analysis</h1>
<section id="calculate-the-returns-1" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-returns-1">Calculate the Returns</h2>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>        date Mean.Sale.Price        state Mean.Home.Value     mean
1 2018-08-31         1138521 San Jose, CA         1158784 2932.893
2 2018-09-30         1121256 San Jose, CA         1169495 2929.350
3 2018-10-31         1133715 San Jose, CA         1177582 2918.253
4 2018-11-30         1104818 San Jose, CA         1180853 2900.606
5 2018-12-31         1081306 San Jose, CA         1179078 2886.816
6 2019-01-31         1060308 San Jose, CA         1169053 2889.411
  Metropolitan.Area Home_Value_Return Rental_Price_Return Sale_Price_Return
1      San Jose, CA        38.6990930         -0.57535478         45.463315
2      San Jose, CA         0.9243363         -0.12078553         -1.516441
3      San Jose, CA         0.6914401         -0.37882682          1.111165
4      San Jose, CA         0.2778182         -0.60471865         -2.548877
5      San Jose, CA        -0.1503518         -0.47541551         -2.128133
6      San Jose, CA        -0.8501966          0.08988467         -1.941911</code></pre>
</div>
</div>
</section>
<section id="plot-for-rental-sale-home-values-for-san-jose-ca" class="level2">
<h2 class="anchored" data-anchor-id="plot-for-rental-sale-home-values-for-san-jose-ca">Plot For Rental, Sale, Home Values For San Jose, CA</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Your existing plot_ly code</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> san_jose_data, <span class="at">x =</span> <span class="sc">~</span>date) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>Rental_Price_Return, <span class="at">name =</span> <span class="st">'Mean Rental Price'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>) </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding background color and title</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Rental Price Over Time"</span>,  <span class="co"># Add your title here</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">paper_bgcolor =</span> <span class="st">'#E0E0E0'</span>,  <span class="co"># Set the background color of the plotting area</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot_bgcolor =</span> <span class="st">'#E0E0E0'</span>  <span class="co"># Set the background color of the graph</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<iframe src="./image/GARCH/rental.html" width="100%" height="400">
</iframe>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(<span class="at">data =</span> san_jose_data, <span class="at">x =</span> <span class="sc">~</span>date) <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>Mean.Sale.Price, <span class="at">name =</span> <span class="st">'Mean Sale Price'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>Mean.Home.Value, <span class="at">name =</span> <span class="st">'Mean Home Value'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>) </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding background color and title</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">%&gt;%</span> <span class="fu">layout</span>(</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Mean Sale Price and Home Value Over Time"</span>,  <span class="co"># Add your title here</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">paper_bgcolor =</span> <span class="st">'#E0E0E0'</span>,  <span class="co"># Set the background color of the plotting area</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot_bgcolor =</span> <span class="st">'#E0E0E0'</span>  <span class="co"># Set the background color of the graph</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<iframe src="./image/GARCH/hs.html" width="100%" height="400">
</iframe>
</section>
<section id="return-plots" class="level2">
<h2 class="anchored" data-anchor-id="return-plots">Return Plots</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(san_jose_data, <span class="fu">aes</span>(<span class="at">x =</span> date)) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Sale_Price_Return), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Home_Value_Return), <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Rental_Price_Return), <span class="at">color =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series Plot Of Returns"</span>, <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"Value"</span>) <span class="sc">+</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify the background color</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># Background of the entire plot</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="cn">NA</span>)  <span class="co"># Background of the plotting area</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="stationarity-1" class="level2">
<h2 class="anchored" data-anchor-id="stationarity-1">Stationarity</h2>
<p>The plot shows a clear upward trend in both Mean Sale Price and Mean Home Value over time until what appears to be a sharp drop in the most recent data point. This trend indicates that the series is likely non-stationary because the mean of the series is changing over time. The presence of a trend is a strong indication that at least the mean is not constant. The drop at the end could be due to the incident of Covid-19, an extreme value, or a real market crash. ## Volatility The series seems to exhibit periods of different volatility levels. Initially, there is some fluctuation, but the variations appear relatively stable and small. However, the spike at the end of the series suggests a sudden increase in volatility. Volatility in financial time series is often clustered; periods of high volatility are followed by periods of high volatility, and periods of low volatility are followed by periods of low volatility. This plot suggests such clustering might be present, although the spike at the end may skew this perception.</p>
<div class="cell">

</div>
</section>
<section id="first-fit-a-linear-model" class="level2">
<h2 class="anchored" data-anchor-id="first-fit-a-linear-model">First Fit a Linear Model</h2>
<p>I think that the home value can be consisted of the sale price and rental price</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: lattice</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'caret'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    lift</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Mean.Home.Value ~ Mean.Sale.Price + mean, data = df1)

Residuals:
     Min       1Q   Median       3Q      Max 
-1077736   -23052     3736    58944   139684 

Coefficients:
                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      4.130e+05  4.781e+05   0.864    0.392    
Mean.Sale.Price  9.340e-01  1.973e-01   4.733  1.8e-05 ***
mean            -1.092e+02  1.869e+02  -0.585    0.561    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 162500 on 51 degrees of freedom
Multiple R-squared:  0.347, Adjusted R-squared:  0.3214 
F-statistic: 13.55 on 2 and 51 DF,  p-value: 1.904e-05</code></pre>
</div>
</div>
<p>The coefficients are significant</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: carData</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'car'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    recode</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    some</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Mean.Sale.Price            mean 
       1.362895        1.362895 </code></pre>
</div>
</div>
<p>We can see that the Mean sale price and rental price have much relatively low VIF scores. Therefore, we can keep them in modeling:</p>
<div class="cell">

</div>
</section>
<section id="evaluations-of-the-model" class="level2">
<h2 class="anchored" data-anchor-id="evaluations-of-the-model">Evaluations of the model</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, <span class="at">newdata =</span> test)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>SSE <span class="ot">&lt;-</span> <span class="fu">sum</span>((predictions <span class="sc">-</span> test<span class="sc">$</span>Mean.Home.Value)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>SST <span class="ot">&lt;-</span> <span class="fu">sum</span>((test<span class="sc">$</span>Mean.Home.Value <span class="sc">-</span> <span class="fu">mean</span>(train<span class="sc">$</span>Mean.Home.Value))<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>rsquared_test <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">-</span> SSE<span class="sc">/</span>SST</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>rsquared_test </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8123188</code></pre>
</div>
</div>
<p>The rsquared is relatively small, we can now keep the model for later analysis.</p>
</section>
<section id="prepare-to-fit-the-model-and-get-residuals" class="level2">
<h2 class="anchored" data-anchor-id="prepare-to-fit-the-model-and-get-residuals">Prepare to fit the model and get residuals</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>lm.residuals <span class="ot">&lt;-</span> <span class="fu">residuals</span>(model)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lm.residuals, <span class="at">ylab =</span> <span class="st">"Residuals"</span>, <span class="at">main =</span> <span class="st">"Residuals "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="check-correlation-in-these-residuals-using-an-acf-plot" class="level3">
<h3 class="anchored" data-anchor-id="check-correlation-in-these-residuals-using-an-acf-plot">check correlation in these residuals using an ACF plot</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(lm.residuals) <span class="sc">+</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(lm.residuals) <span class="sc">+</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Based on the acf and pacf, we can choose p = 0,1,2,3 q = 0,1,2</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(lm.residuals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  lm.residuals
Dickey-Fuller = -4.5916, Lag order = 3, p-value = 0.01
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p>WE can see that there are little correlations left. The lm residuals are stationary now.</p>
</section>
</section>
<section id="fit-an-appropriate-ararcharmagarch-or-arima-archgarch-1" class="level2">
<h2 class="anchored" data-anchor-id="fit-an-appropriate-ararcharmagarch-or-arima-archgarch-1">Fit an appropriate AR+ARCH/ARMA+GARCH or ARIMA-ARCH/GARCH</h2>
<section id="first-determine-the-arima-model-using-model-diagnostic-1" class="level3">
<h3 class="anchored" data-anchor-id="first-determine-the-arima-model-using-model-diagnostic-1">First, determine the ARIMA model using model diagnostic</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reference from the lab 6 part 1 demo:</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>temp.ts <span class="ot">=</span> <span class="fu">log</span>(<span class="fu">diff</span>(lm.residuals))</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>d<span class="ot">=</span><span class="dv">0</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>i<span class="ot">=</span><span class="dv">1</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>temp<span class="ot">=</span> <span class="fu">data.frame</span>()</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>ls<span class="ot">=</span><span class="fu">matrix</span>(<span class="fu">rep</span>(<span class="cn">NA</span>,<span class="dv">6</span><span class="sc">*</span><span class="dv">71</span>),<span class="at">nrow=</span><span class="dv">71</span>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (p <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(q <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(d <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)<span class="co">#</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(p<span class="dv">-1</span><span class="sc">+</span>d<span class="sc">+</span>q<span class="dv">-1</span><span class="sc">&lt;=</span><span class="dv">8</span>)</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>        model<span class="ot">&lt;-</span> <span class="fu">Arima</span>(temp.ts,<span class="at">order=</span><span class="fu">c</span>(p<span class="dv">-1</span>,d,q<span class="dv">-1</span>),<span class="at">include.drift=</span><span class="cn">FALSE</span>) </span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>        ls[i,]<span class="ot">=</span> <span class="fu">c</span>(p<span class="dv">-1</span>,d,q<span class="dv">-1</span>,model<span class="sc">$</span>aic,model<span class="sc">$</span>bic,model<span class="sc">$</span>aicc)</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>        i<span class="ot">=</span>i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">#print(i)</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>temp<span class="ot">=</span> <span class="fu">as.data.frame</span>(ls)</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(temp)<span class="ot">=</span> <span class="fu">c</span>(<span class="st">"p"</span>,<span class="st">"d"</span>,<span class="st">"q"</span>,<span class="st">"AIC"</span>,<span class="st">"BIC"</span>,<span class="st">"AICc"</span>)</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: right;">p</th>
<th style="text-align: right;">d</th>
<th style="text-align: right;">q</th>
<th style="text-align: right;">AIC</th>
<th style="text-align: right;">BIC</th>
<th style="text-align: right;">AICc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">97.45315</td>
<td style="text-align: right;">100.18774</td>
<td style="text-align: right;">97.91469</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">107.36990</td>
<td style="text-align: right;">108.70210</td>
<td style="text-align: right;">107.52375</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">136.14317</td>
<td style="text-align: right;">137.43900</td>
<td style="text-align: right;">136.30317</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">97.72055</td>
<td style="text-align: right;">101.82243</td>
<td style="text-align: right;">98.68055</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">97.19728</td>
<td style="text-align: right;">99.86169</td>
<td style="text-align: right;">97.67728</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">109.48434</td>
<td style="text-align: right;">112.07602</td>
<td style="text-align: right;">109.98434</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">99.71110</td>
<td style="text-align: right;">105.18029</td>
<td style="text-align: right;">101.37777</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">98.08008</td>
<td style="text-align: right;">102.07670</td>
<td style="text-align: right;">99.08008</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.84798</td>
<td style="text-align: right;">104.73549</td>
<td style="text-align: right;">101.89146</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">101.63650</td>
<td style="text-align: right;">108.47298</td>
<td style="text-align: right;">104.24520</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">99.15448</td>
<td style="text-align: right;">104.48330</td>
<td style="text-align: right;">100.89361</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">100.96699</td>
<td style="text-align: right;">106.15033</td>
<td style="text-align: right;">102.78517</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">98.32414</td>
<td style="text-align: right;">106.52792</td>
<td style="text-align: right;">102.14232</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">96.49156</td>
<td style="text-align: right;">103.15259</td>
<td style="text-align: right;">99.21884</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">101.82668</td>
<td style="text-align: right;">108.30587</td>
<td style="text-align: right;">104.68383</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">98.48268</td>
<td style="text-align: right;">102.58457</td>
<td style="text-align: right;">99.44268</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">107.31463</td>
<td style="text-align: right;">109.97904</td>
<td style="text-align: right;">107.79463</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">130.00856</td>
<td style="text-align: right;">132.60023</td>
<td style="text-align: right;">130.50856</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">99.71315</td>
<td style="text-align: right;">105.18233</td>
<td style="text-align: right;">101.37982</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">99.01782</td>
<td style="text-align: right;">103.01443</td>
<td style="text-align: right;">100.01782</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">109.92294</td>
<td style="text-align: right;">113.81045</td>
<td style="text-align: right;">110.96642</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">101.50948</td>
<td style="text-align: right;">108.34596</td>
<td style="text-align: right;">104.11817</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">99.91203</td>
<td style="text-align: right;">105.24085</td>
<td style="text-align: right;">101.65116</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">102.39524</td>
<td style="text-align: right;">107.57859</td>
<td style="text-align: right;">104.21342</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">102.90624</td>
<td style="text-align: right;">111.11002</td>
<td style="text-align: right;">106.72443</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">100.00410</td>
<td style="text-align: right;">106.66512</td>
<td style="text-align: right;">102.73137</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">102.64853</td>
<td style="text-align: right;">109.12772</td>
<td style="text-align: right;">105.50568</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">100.32335</td>
<td style="text-align: right;">109.89442</td>
<td style="text-align: right;">105.65668</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">98.17100</td>
<td style="text-align: right;">106.16423</td>
<td style="text-align: right;">102.17100</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">101.91516</td>
<td style="text-align: right;">109.69018</td>
<td style="text-align: right;">106.11516</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">100.19843</td>
<td style="text-align: right;">105.66761</td>
<td style="text-align: right;">101.86509</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">97.91843</td>
<td style="text-align: right;">101.91504</td>
<td style="text-align: right;">98.91843</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">120.71913</td>
<td style="text-align: right;">124.60664</td>
<td style="text-align: right;">121.76261</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">101.67495</td>
<td style="text-align: right;">108.51143</td>
<td style="text-align: right;">104.28364</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">97.80713</td>
<td style="text-align: right;">103.13595</td>
<td style="text-align: right;">99.54626</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">101.76404</td>
<td style="text-align: right;">106.94739</td>
<td style="text-align: right;">103.58222</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">103.40488</td>
<td style="text-align: right;">111.60866</td>
<td style="text-align: right;">107.22307</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">99.68591</td>
<td style="text-align: right;">106.34694</td>
<td style="text-align: right;">102.41319</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.81063</td>
<td style="text-align: right;">107.28982</td>
<td style="text-align: right;">103.66778</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">101.43536</td>
<td style="text-align: right;">111.00643</td>
<td style="text-align: right;">106.76869</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">98.94989</td>
<td style="text-align: right;">106.94312</td>
<td style="text-align: right;">102.94989</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">102.04989</td>
<td style="text-align: right;">109.82491</td>
<td style="text-align: right;">106.24989</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">99.25180</td>
<td style="text-align: right;">110.19016</td>
<td style="text-align: right;">106.45180</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">100.21015</td>
<td style="text-align: right;">109.53558</td>
<td style="text-align: right;">105.81015</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">100.95327</td>
<td style="text-align: right;">110.02412</td>
<td style="text-align: right;">106.84800</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">99.33167</td>
<td style="text-align: right;">106.16815</td>
<td style="text-align: right;">101.94036</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">97.99772</td>
<td style="text-align: right;">103.32654</td>
<td style="text-align: right;">99.73685</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">109.96631</td>
<td style="text-align: right;">115.14965</td>
<td style="text-align: right;">111.78449</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">101.26710</td>
<td style="text-align: right;">109.47087</td>
<td style="text-align: right;">105.08528</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">99.55553</td>
<td style="text-align: right;">106.21655</td>
<td style="text-align: right;">102.28280</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">102.21620</td>
<td style="text-align: right;">108.69538</td>
<td style="text-align: right;">105.07334</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">99.34029</td>
<td style="text-align: right;">108.91136</td>
<td style="text-align: right;">104.67363</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">99.42824</td>
<td style="text-align: right;">107.42147</td>
<td style="text-align: right;">103.42824</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">102.50291</td>
<td style="text-align: right;">110.27793</td>
<td style="text-align: right;">106.70291</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">101.19914</td>
<td style="text-align: right;">112.13751</td>
<td style="text-align: right;">108.39914</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">99.33271</td>
<td style="text-align: right;">108.65814</td>
<td style="text-align: right;">104.93271</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">103.01403</td>
<td style="text-align: right;">112.08489</td>
<td style="text-align: right;">108.90877</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">104.20091</td>
<td style="text-align: right;">116.50657</td>
<td style="text-align: right;">113.67459</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">101.16082</td>
<td style="text-align: right;">111.81846</td>
<td style="text-align: right;">108.73977</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">101.16119</td>
<td style="text-align: right;">109.36496</td>
<td style="text-align: right;">104.97937</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">99.85388</td>
<td style="text-align: right;">106.51490</td>
<td style="text-align: right;">102.58115</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">111.92853</td>
<td style="text-align: right;">118.40772</td>
<td style="text-align: right;">114.78568</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">101.61498</td>
<td style="text-align: right;">111.18605</td>
<td style="text-align: right;">106.94831</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">101.11461</td>
<td style="text-align: right;">109.10784</td>
<td style="text-align: right;">105.11461</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">104.02255</td>
<td style="text-align: right;">111.79757</td>
<td style="text-align: right;">108.22255</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.73599</td>
<td style="text-align: right;">111.67436</td>
<td style="text-align: right;">107.93599</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">101.42404</td>
<td style="text-align: right;">110.74947</td>
<td style="text-align: right;">107.02404</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">104.34488</td>
<td style="text-align: right;">113.41574</td>
<td style="text-align: right;">110.23962</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">102.73352</td>
<td style="text-align: right;">115.03919</td>
<td style="text-align: right;">112.20721</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">100.78264</td>
<td style="text-align: right;">111.44028</td>
<td style="text-align: right;">108.36159</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">101.54131</td>
<td style="text-align: right;">115.21426</td>
<td style="text-align: right;">113.76353</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="evaluations-using-aic-bic-and-aicc-1" class="level3">
<h3 class="anchored" data-anchor-id="evaluations-using-aic-bic-and-aicc-1">Evaluations using AIC, BIC, and AICc</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>temp[<span class="fu">which.min</span>(temp<span class="sc">$</span>AIC),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   p d q      AIC      BIC     AICc
14 0 1 4 96.49156 103.1526 99.21884</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>temp[<span class="fu">which.min</span>(temp<span class="sc">$</span>BIC),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  p d q      AIC      BIC     AICc
5 0 1 1 97.19728 99.86169 97.67728</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>temp[<span class="fu">which.min</span>(temp<span class="sc">$</span>AICc),]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  p d q      AIC      BIC     AICc
5 0 1 1 97.19728 99.86169 97.67728</code></pre>
</div>
</div>
<p>We can see that for (0,1,1) and (0,1,4), the AIC, BIC, and AICc are different. We should choose from them.</p>
</section>
<section id="compare-arima-models-for-404-and-arima-000-1" class="level3">
<h3 class="anchored" data-anchor-id="compare-arima-models-for-404-and-arima-000-1">Compare ARIMA Models for (4,0,4) and ARIMA (0,0,0)</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">236</span>)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>model_output21 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(lm.residuals, <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>model_output22 <span class="ot">&lt;-</span> <span class="fu">capture.output</span>(<span class="fu">sarima</span>(lm.residuals, <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">4</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-41-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(model_output21[<span class="dv">120</span><span class="sc">:</span><span class="dv">147</span>], model_output21[<span class="fu">length</span>(model_output21)], <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, Q), period = S), 
    xreg = constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
        REPORT = 1, reltol = tol))

Coefficients:
          ma1   constant
      -1.0000  -575.8749
s.e.   0.0519  1390.1147

sigma^2 estimated as 2.532e+10:  log likelihood = -712,  aic = 1430.01

$degrees_of_freedom
[1] 51

$ttable
          Estimate        SE  t.value p.value
ma1        -1.0000    0.0519 -19.2505  0.0000
constant -575.8749 1390.1147  -0.4143  0.6804

$AIC
[1] 26.98128

$AICc
[1] 26.98581

$BIC
[1] 27.09281</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(model_output22[<span class="dv">50</span><span class="sc">:</span><span class="dv">80</span>], model_output22[<span class="fu">length</span>(model_output22)], <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    xreg = constant, transform.pars = trans, fixed = fixed, optim.control = list(trace = trc, 
        REPORT = 1, reltol = tol))

Coefficients:
          ma1     ma2     ma3     ma4   constant
      -1.1837  0.0274  0.0310  0.1253  -744.0292
s.e.   0.1572  0.2249  0.2357  0.1388   784.9040

sigma^2 estimated as 2.335e+10:  log likelihood = -710.54,  aic = 1433.07

$degrees_of_freedom
[1] 48

$ttable
          Estimate       SE t.value p.value
ma1        -1.1837   0.1572 -7.5293  0.0000
ma2         0.0274   0.2249  0.1216  0.9037
ma3         0.0310   0.2357  0.1315  0.8959
ma4         0.1253   0.1388  0.9032  0.3709
constant -744.0292 784.9040 -0.9479  0.3479

$AIC
[1] 27.03906

$AICc
[1] 27.06315

$BIC
[1] 27.26212

NA</code></pre>
</div>
</div>
<p>Based on the model comparsion and diagnostic, I think that ARIMA Models for (0,1,1) is better with smaller evaluation matrices and it is more suitable and proper based on acf and pacf plots. In addition, the acf of residule is also more stationary.</p>
</section>
</section>
<section id="fit-the-best-one-arima011" class="level2">
<h2 class="anchored" data-anchor-id="fit-the-best-one-arima011">Fit the best one ARIMA(0,1,1)</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>mean_value <span class="ot">&lt;-</span> <span class="fu">mean</span>(temp.ts, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace NaN values with the mean</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>temp.ts[<span class="fu">is.na</span>(temp.ts)] <span class="ot">&lt;-</span> mean_value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">arima</span>(temp.ts, <span class="at">order =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = temp.ts, order = c(0, 1, 1))

Coefficients:
          ma1
      -0.8543
s.e.   0.0857

sigma^2 estimated as 0.8381:  log likelihood = -69.85,  aic = 143.7

Training set error measures:
                       ME      RMSE       MAE        MPE     MAPE      MASE
Training set -0.006216912 0.9068076 0.5400164 -0.8352652 5.733552 0.7704727
                    ACF1
Training set -0.03946064</code></pre>
</div>
</div>
<section id="get-the-residuals-of-the-arima-model-1" class="level3">
<h3 class="anchored" data-anchor-id="get-the-residuals-of-the-arima-model-1">get the residuals of the arima model</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>arima.res <span class="ot">&lt;-</span> <span class="fu">residuals</span>(fit2)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the residuals</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(arima.res) <span class="sc">+</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(arima.res) <span class="sc">+</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that mostly, the residual is stationary however the residuals of ARIMA model indicates some flutucations. In this case, I think that we can try to fit an ARCH/GARCH model.</p>
<p>Therefore, I think we can further making analysis by adding GARCH models to see if we should use it.</p>
</section>
</section>
<section id="model-diagnostics-for-archgarch-model-no-need-in-my-case-just-to-verify" class="level2">
<h2 class="anchored" data-anchor-id="model-diagnostics-for-archgarch-model-no-need-in-my-case-just-to-verify">Model Diagnostics For ARCH/GARCH model (No need in my case, Just to Verify)</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>acf_plot <span class="ot">&lt;-</span> <span class="fu">ggAcf</span>(arima.res<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"ACF for Squared Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>pacf_plot <span class="ot">&lt;-</span> <span class="fu">ggPacf</span>(arima.res<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"PACF for Squared Model Residuals"</span>) <span class="sc">+</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the plots</span></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(acf_plot, pacf_plot, <span class="at">ncol =</span> <span class="dv">1</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can see that it acutally already sufficient to just use ARIMA model. GARCH model is not required since it is already pretty good in removing correlations. The residual and squared residual are stationary.</p>
<p>However, I still think that I can at least try to make a further diagnostic and compare the results to verify that I do not need to fit GARCH model.</p>
<div class="cell">

</div>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 29</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
garch(x = arima.res, order = c(q, p), trace = F)

Coefficient(s):
       a0         a1         a2         a3         a4         a5         b1  
6.293e-01  2.421e-15  1.233e-02  9.166e-02  1.292e-01  3.065e-02  7.709e-02  </code></pre>
</div>
</div>
<p>From here, I think that garch(5,1) is a good choice</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fGarch)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">5</span>,<span class="dv">1</span>), arima.res,<span class="at">trace =</span> F)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(5, 1), data = arima.res, trace = F) 

Mean and Variance Equation:
 data ~ garch(5, 1)
&lt;environment: 0x0000019ede9591f0&gt;
 [data = arima.res]

Conditional Distribution:
 norm 

Coefficient(s):
         mu        omega       alpha1       alpha2       alpha3       alpha4  
-6.2169e-02   8.3807e-07   1.0000e-08   1.0000e-08   1.0000e-08   9.2063e-02  
     alpha5        beta1  
 1.0279e-01   9.2259e-01  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     -6.217e-02   1.295e-01   -0.480    0.631    
omega   8.381e-07   4.668e-02    0.000    1.000    
alpha1  1.000e-08   1.437e-01    0.000    1.000    
alpha2  1.000e-08   2.182e-01    0.000    1.000    
alpha3  1.000e-08         NaN      NaN      NaN    
alpha4  9.206e-02         NaN      NaN      NaN    
alpha5  1.028e-01   2.194e-01    0.468    0.639    
beta1   9.226e-01   1.042e-01    8.856   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 -65.04509    normalized:  -1.227266 

Description:
 Mon Nov 20 22:29:45 2023 by user: yzh20 


Standardised Residuals Tests:
                                 Statistic      p-Value
 Jarque-Bera Test   R    Chi^2  44.4248571 2.255615e-10
 Shapiro-Wilk Test  R    W       0.8789801 6.678698e-05
 Ljung-Box Test     R    Q(10)   8.6460018 5.659961e-01
 Ljung-Box Test     R    Q(15)  10.7960500 7.669135e-01
 Ljung-Box Test     R    Q(20)  14.7059080 7.929810e-01
 Ljung-Box Test     R^2  Q(10)   1.0064352 9.998227e-01
 Ljung-Box Test     R^2  Q(15)   2.8524750 9.997063e-01
 Ljung-Box Test     R^2  Q(20)  13.9148641 8.347861e-01
 LM Arch Test       R    TR^2    3.3655148 9.923671e-01

Information Criterion Statistics:
     AIC      BIC      SIC     HQIC 
2.756418 3.053821 2.718346 2.870785 </code></pre>
</div>
</div>
<p>The results shows that (5,1) is not an optimal fit. The coefficients are not significant.</p>
<p>Therefore, let us try (1,0)</p>
<section id="try-to-compare-with-garch10" class="level3">
<h3 class="anchored" data-anchor-id="try-to-compare-with-garch10">Try to compare with Garch(1,0)</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">garchFit</span>(<span class="sc">~</span><span class="fu">garch</span>(<span class="dv">1</span>,<span class="dv">0</span>), arima.res,<span class="at">trace =</span> F)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Title:
 GARCH Modelling 

Call:
 garchFit(formula = ~garch(1, 0), data = arima.res, trace = F) 

Mean and Variance Equation:
 data ~ garch(1, 0)
&lt;environment: 0x0000019ed50238d0&gt;
 [data = arima.res]

Conditional Distribution:
 norm 

Coefficient(s):
         mu        omega       alpha1  
-0.00621650   0.82226165   0.00000001  

Std. Errors:
 based on Hessian 

Error Analysis:
         Estimate  Std. Error  t value Pr(&gt;|t|)    
mu     -6.216e-03   1.283e-01   -0.048    0.961    
omega   8.223e-01   1.655e-01    4.969 6.73e-07 ***
alpha1  1.000e-08   9.213e-02    0.000    1.000    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Log Likelihood:
 -70.01777    normalized:  -1.32109 

Description:
 Mon Nov 20 22:29:45 2023 by user: yzh20 


Standardised Residuals Tests:
                                  Statistic      p-Value
 Jarque-Bera Test   R    Chi^2  243.8613995 0.000000e+00
 Shapiro-Wilk Test  R    W        0.8077994 7.558550e-07
 Ljung-Box Test     R    Q(10)   11.1170806 3.484694e-01
 Ljung-Box Test     R    Q(15)   14.1037596 5.176748e-01
 Ljung-Box Test     R    Q(20)   17.1059480 6.460837e-01
 Ljung-Box Test     R^2  Q(10)    1.2640754 9.995016e-01
 Ljung-Box Test     R^2  Q(15)    1.6742729 9.999910e-01
 Ljung-Box Test     R^2  Q(20)    3.3919710 9.999883e-01
 LM Arch Test       R    TR^2    12.3534533 4.177270e-01

Information Criterion Statistics:
     AIC      BIC      SIC     HQIC 
2.755388 2.866914 2.749426 2.798275 </code></pre>
</div>
</div>
<p>Now, it seems that the alpha1 is still not significant. Therefore, in this case, we can stop with arima model. No additional Garch is needed.</p>
<p>However, we still can compare the prediction fits.</p>
</section>
</section>
<section id="forecast" class="level2">
<h2 class="anchored" data-anchor-id="forecast">Forecast</h2>
<section id="arima-011" class="level3">
<h3 class="anchored" data-anchor-id="arima-011">ARIMA (0,1,1)</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autoplot with custom colors</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>plot_fit_ <span class="ot">&lt;-</span> <span class="fu">autoplot</span>(<span class="fu">forecast</span>(fit2,<span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>),</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#E0E0E0"</span>, <span class="at">color =</span> <span class="st">"#E0E0E0"</span>)</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(plot_fit_)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="GARCH_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>By comparing the fits, I think that the ARIMA model alone is better. We do not need the GArch in my case</p>
</section>
</section>
<section id="final-model-arima-011-and-equation" class="level2">
<h2 class="anchored" data-anchor-id="final-model-arima-011-and-equation">Final model: ARIMA (0,1,1) and equation</h2>
<section id="box-ljung-test-1" class="level3">
<h3 class="anchored" data-anchor-id="box-ljung-test-1">Box Ljung Test</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>box_ljung_test <span class="ot">&lt;-</span> <span class="fu">Box.test</span>(arima.res, <span class="at">lag =</span> <span class="dv">10</span>, <span class="at">type =</span> <span class="st">"Ljung-Box"</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the test results</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>box_ljung_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Box-Ljung test

data:  arima.res
X-squared = 11.117, df = 10, p-value = 0.3485</code></pre>
</div>
</div>
<p>the p-value is above a significance level 0.05, therefore, I do not reject the null hypothesis. This suggests that the residuals do not exhibit autocorrelation and that the model is adequate. This conclusion alignes with my model diagnostics and forecasting comparesion. The ARIMA(0,2,3) alone is enough in my case.</p>
</section>
<section id="equation" class="level3">
<h3 class="anchored" data-anchor-id="equation">Equation</h3>
<p>The ARIMA(0,1,1) model is defined as:</p>
<p><span class="math display">\[
(1 - B) X_t = (1 + \theta_1B)a_t
\]</span></p>
<p>where: - ( B ) is the backshift operator, - ( X_t ) is the time series observation at time t, - ( (1 - B) ) denotes first-order differencing, - ( _1 ) is the parameter of the moving average part of the model, - ( a_t ) is the error term at time t.</p>
<p>This model is a simplification of higher-order ARIMA models and is used when the data exhibits a level of temporal dependency that can be explained with a single differencing and a single lag in the moving average component.</p>
<p>No Garch components since in my case the ARIMA is better and sufficient.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>